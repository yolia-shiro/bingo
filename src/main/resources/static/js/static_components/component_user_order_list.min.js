var templateDiv=$("#choose1");$(".close").click(function(){templateDiv.removeClass("active");templateDiv.addClass("close");$(this).removeClass("close");$(this).addClass("active");templateDiv=$(this)});var aCode=[];var pageNum,nowPage=1;function on(a){$("#txt"+$(a).attr("id")).show()}function leave(a){$("#txt"+$(a).attr("id")).hide()}function showCode(a){for(let key in aCode){if(aCode[key].orderoid==a.id){window.alert(aCode[key].key);break}}}function change(a){if($(a).attr("id")==-1){if(nowPage==1){}else{nowPage-=1;setinfo(nowPage)}console.log("上一页")}else{if($(a).attr("id")==0){if(nowPage+1>pageNum){}else{nowPage+=1;setinfo(nowPage)}console.log("下一页")}else{nowPage=$(a).attr("id");setinfo(nowPage);console.log("跳转到指定页")}}}function setinfo(a){$("#content").html('                <div class="order-title">\n                    <div class="row1">商品名称</div>\n                    <div class="row2">购买日期</div>\n                    <div class="row3">订单号</div>\n                    <div class="row3">总计</div>\n                </div>');$("#Pages").html("");var b={uid:userInfo.uid,pageIndex:a-1,pageCount:10};$.post("store/getOrderListByUid",b,function(d){pageNum=d.resultMap.allPageNum;var c=d.resultMap.orderList;for(let key in c){var h="";let oid=c[key].oid;var f='<div class="myorder-elem">\n                    <span class="column1">';$.ajax({url:"store/getOrderDetailByOid",data:{oid:oid},type:"post",async:false,success:function(i){for(let key in i.resultMap.orderDetail){$.ajax({url:"store/gameDetailShow?id="+i.resultMap.orderDetail[key].gid,type:"post",async:false,success:function(k){var j=k.resultMap.game;f+='                        <span class="column1-elem" id='+oid+"-"+j.gid+' onmouseover="on(this)" onmouseout="leave(this)">\n                            <img src='+j.chref+'>\n                            <span class="column1-elem-txt" id=txt'+oid+"-"+j.gid+">"+j.gname+"</span>\n                        </span>";h+=j.gname+"的激活码:  "+i.resultMap.orderDetail[key].klist}});h+="\n"}}});f+=' </span>\n                <div class="row2">'+c[key].otime.substr(0,19)+'</div>\n                <div class="row3">'+c[key].oid+'</div>\n                <div class="row3">';console.log("换行");f+="￥"+c[key].allprice;f+='</div>\n                <div class="condition" id="showCode">\n                    <button class="condition btn-info"  id='+c[key].oid+' onclick="showCode(this)">查看激活码</button>\n                </div>\n            </div>';$("#content").append(f);var g={orderoid:c[key].oid,key:h};aCode.push(g);console.log("加入激活码列表"+aCode)}var f='            <nav aria-label="Page navigation">\n                <ul class="pagination">\n                    <li>\n                        <a href="#" aria-label="Previous" id='+-1+" onclick='change(this)'>\n                            <span aria-hidden=\"true\">&laquo;</span>\n                        </a>\n                    </li>\n";console.log("pageNum:"+pageNum);var e=1;for(;e<=pageNum;e++){if(e==nowPage){f+="<li class='active'><a href=\"#\" id="+e+" onclick='change(this)'>"+e+"</a></li>\n"}else{f+='<li><a href="#" id='+e+" onclick='change(this)'>"+e+"</a></li>\n"}}f+='                    <li>\n                        <a href="#" aria-label="Next" id='+0+" onclick='change(this)'>\n                            <span aria-hidden=\"true\" >&raquo;</span>\n                        </a>\n                    </li>\n                </ul>\n            </nav>\n";$("#Pages").append(f)})}$(document).ready(function(){$("#choose1").removeClass("close");$("#choose1").addClass("active");setinfo(1)});